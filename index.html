<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gerador de Arte iOS Style</title>
    <style>
        :root {
            /* Paleta de Cores iOS Claro */
            --bg-app: #f2f2f7; /* Fundo cinza claro padr√£o do iOS */
            --glass-light: rgba(255, 255, 255, 0.65); /* Vidro claro para pain√©is */
            --glass-heavy: rgba(255, 255, 255, 0.85); /* Vidro mais opaco para barras */
            --border-light: rgba(0, 0, 0, 0.1); /* Bordas sutis */
            --text-primary: #1c1c1e; /* Texto escuro principal */
            --text-secondary: #8e8e93; /* Texto cinza secund√°rio */
            --accent-color: #007aff; /* Azul padr√£o do iOS */
            --accent-danger: #ff3b30; /* Vermelho padr√£o do iOS */
            --shadow-soft: 0 8px 24px rgba(0, 0, 0, 0.08); /* Sombra suave difusa */
            --radius-xl: 24px; /* Bordas muito arredondadas */
            --radius-l: 16px;
            --radius-m: 12px;
        }

        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-app);
            color: var(--text-primary);
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- Header Glass Claro --- */
        .header {
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center; /* T√≠tulo centralizado estilo iOS */
            padding: 0 20px;
            flex-shrink: 0;
            z-index: 20;
            
            background: var(--glass-light);
            backdrop-filter: blur(20px); /* Efeito de vidro forte */
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-light);
            position: relative;
        }

        h1 { 
            font-size: 1.1rem; margin: 0; font-weight: 600; 
            color: var(--text-primary);
        }

        /* --- Layout Principal --- */
        .app-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            height: calc(100vh - 50px);
            width: 100%;
            overflow: hidden;
            padding: 20px; /* Espa√ßo ao redor do conte√∫do */
            gap: 20px;
        }

        /* --- Sidebar (Configura√ß√µes) --- */
        .sidebar {
            background: var(--glass-light);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: var(--radius-l);
            border: 1px solid var(--border-light);
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            z-index: 10;
            box-shadow: var(--shadow-soft);
        }
        
        .panel-section h3 { 
            margin: 0 0 12px 0; font-size: 0.8rem; color: var(--text-secondary); 
            text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600;
        }

        /* Bot√µes e Op√ß√µes estilo iOS */
        .btn {
            width: 100%; padding: 12px; border: none; border-radius: var(--radius-m);
            font-weight: 500; cursor: pointer; font-size: 0.95rem;
            display: flex; align-items: center; justify-content: center; gap: 8px;
            color: var(--accent-color); background: rgba(0, 122, 255, 0.1); /* Fundo azul claro */
            transition: all 0.2s ease;
            min-height: 44px;
        }
        .btn:active { transform: scale(0.98); background: rgba(0, 122, 255, 0.2); }
        
        .btn-random { color: var(--text-primary); background: rgba(0,0,0,0.05); }
        .btn-search { color: var(--text-primary); background: rgba(0,0,0,0.05); }
        .btn-upload { color: var(--text-primary); background: rgba(0,0,0,0.05); }

        .btn-toggle { background: rgba(0,0,0,0.05); color: var(--text-secondary); }
        .btn-toggle.active { 
            background: var(--accent-color); color: white; 
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        }
        
        .btn-action { 
            background: rgba(0,0,0,0.05); color: var(--text-primary); font-size: 1.3rem; 
            width: 50px; height: 50px; padding: 0; border-radius: 50%; /* Bot√µes redondos */
        }
        .btn-dl { color: var(--accent-color); }
        .btn-fs { color: var(--text-primary); }

        .btn-trend { 
            background: rgba(0,0,0,0.05); color: var(--text-primary); 
            border: none; text-align: left; padding: 12px; 
            font-size: 0.9rem; display: flex; justify-content: space-between; 
            border-radius: var(--radius-m); margin-bottom: 8px;
        }
        .btn-trend span:last-child { color: var(--accent-color); }

        .sidebar-shapes { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .shape-option {
            background: rgba(0,0,0,0.05); padding: 12px; border-radius: var(--radius-m);
            font-size: 0.9rem; display: flex; align-items: center; gap: 10px; cursor: pointer;
            color: var(--text-primary); transition: 0.2s;
        }
        .shape-option:hover { background: rgba(0,0,0,0.08); }
        .shape-option input { 
            width: 20px; height: 20px; margin: 0; accent-color: var(--accent-color); 
            border-radius: 4px;
        }

        /* Inputs */
        #searchPanel { display: none; margin-bottom: 10px; }
        #searchInput { 
            width: 100%; background: rgba(0,0,0,0.05); border: none; 
            color: var(--text-primary); padding: 12px; margin-bottom: 8px; 
            font-size: 1rem; border-radius: var(--radius-m); outline: none;
        }
        #searchInput::placeholder { color: var(--text-secondary); }

        /* --- Workspace e Canvas --- */
        .workspace {
            display: flex; flex-direction: column; gap: 20px;
            height: 100%; position: relative; overflow: hidden;
            padding: 0; /* Remover padding interno */
        }

        /* Canvas flutuante estilo "Card" */
        .canvas-area {
            flex: 1; display: flex; justify-content: center; align-items: center;
            position: relative; min-height: 0; width: 100%;
            background: #fff; /* Fundo branco para a arte */
            border-radius: var(--radius-xl);
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-soft);
            overflow: hidden;
        }

        .canvas-area:fullscreen { border: none; border-radius: 0; box-shadow: none; background: #000; }
        canvas { max-width: 100%; max-height: 100%; aspect-ratio: 16/9; object-fit: contain; }

        /* Bot√£o Sair Fullscreen estilo iOS (X redondo) */
        #btnExitFS {
            position: fixed; top: 20px; right: 20px; width: 44px; height: 44px; border-radius: 50%;
            background: var(--glass-heavy); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-light); color: var(--text-primary);
            font-size: 1.1rem; cursor: pointer; z-index: 9999;
            opacity: 0; transition: 0.3s; display: flex; align-items: center; justify-content: center;
            box-shadow: var(--shadow-soft);
        }
        .canvas-area:fullscreen #btnExitFS { opacity: 1; }

        /* --- Barra de Controles Inferior ("Dock" Flutuante) --- */
        .controls-bar {
            /* Flutuando na parte inferior */
            position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: auto; min-width: 60%; max-width: 90%;
            
            background: var(--glass-heavy);
            backdrop-filter: blur(30px); /* Blur intenso estilo Dock */
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid var(--border-light);
            border-radius: 30px; /* Bordas estilo p√≠lula */
            padding: 10px 20px;
            
            display: flex; justify-content: space-between; align-items: center; gap: 20px;
            box-shadow: var(--shadow-soft);
            z-index: 30;
        }

        /* Controles na Dock */
        .control-group { display: flex; flex-direction: column; gap: 4px; align-items: center; flex: 1; }
        .control-label { font-size: 0.7rem; color: var(--text-secondary); text-align: center; width: 100%; white-space: nowrap;}
        
        /* Sliders estilo iOS */
        input[type=range] { 
            width: 100%; max-width: 120px; -webkit-appearance: none; background: transparent; cursor: pointer; 
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 4px; background: rgba(0,0,0,0.1); border-radius: 2px;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%;
            background: #fff; box-shadow: 0 2px 6px rgba(0,0,0,0.2); margin-top: -8px;
        }

        /* Select estilo iOS */
        select { 
            background: rgba(0,0,0,0.05); border: none; 
            color: var(--text-primary); padding: 6px 10px; border-radius: 8px; 
            font-size: 0.85rem; outline: none; text-align: center;
        }

        /* Bot√£o Central de Destaque (Auto Evolu√ß√£o) */
        #btnDetailMode { 
            width: auto; padding: 10px 20px; border-radius: 20px; font-size: 0.9rem; 
            background: rgba(0,0,0,0.05); color: var(--text-primary);
            display: flex; flex-direction: column; gap: 2px;
        }
        #btnDetailMode.active { 
            background: var(--accent-color); color: white; 
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.4);
        }
        #btnDetailMode span:last-child { font-size: 0.7rem; opacity: 0.8; }

        /* Status Overlay Claro */
        .status-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: var(--glass-light); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            z-index: 10; pointer-events: none; border-radius: var(--radius-xl);
        }
        .status-text { color: var(--text-primary); font-weight: 500; }
        .loader { 
            width: 40px; height: 40px; border: 4px solid rgba(0,0,0,0.1); 
            border-top-color: var(--accent-color); border-radius: 50%; 
            animation: rotation 1s linear infinite; margin-bottom: 15px; 
        }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* --- Responsividade (Mobile) --- */
        @media (max-width: 900px) {
            body { height: auto; min-height: 100vh; overflow-y: auto; }
            .app-container { 
                display: flex; flex-direction: column; height: auto; overflow: visible; 
                padding: 15px; gap: 15px;
            }
            
            /* Sidebar vai para baixo */
            .sidebar { order: 2; height: auto; }

            /* Workspace fica em cima */
            .workspace { order: 1; height: auto; gap: 15px; }
            .canvas-area { min-height: 300px; max-height: 60vh; border-radius: var(--radius-l); }

            /* Barra de Controles vira uma barra fixa inferior no mobile */
            .controls-bar {
                position: fixed; bottom: 15px; left: 15px; right: 15px;
                width: auto; max-width: none; transform: none;
                padding: 10px 15px; gap: 10px;
                justify-content: space-between;
                border-radius: 24px;
            }
            
            /* Ajustes para caber na barra mobile */
            .control-label { display: none; } /* Esconde labels para economizar espa√ßo */
            input[type=range] { max-width: 80px; }
            select { width: auto; padding: 6px; }
            #btnDetailMode { padding: 8px 12px; font-size: 0.8rem; }
            #btnDetailMode span:last-child { display: none; }
            .btn-action { width: 40px; height: 40px; font-size: 1.1rem; }
        }
    </style>
</head>
<body>

    <header class="header">
        <h1>GeoArt <span style="font-weight:300; color:var(--accent-color);">iOS</span></h1>
    </header>

    <div class="app-container">
        <aside class="sidebar">
            <div class="panel-section">
                <h3>Fonte da Imagem</h3>
                <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                    <button id="btnRandom" class="btn btn-random" style="flex:1;">üé≤ Aleat√≥ria</button>
                    <label class="btn btn-upload" style="flex:1;">
                        üìÇ Arquivo
                        <input type="file" id="fileInput" hidden accept="image/*">
                    </label>
                </div>
                <button id="btnToggleSearch" class="btn btn-search" style="margin-bottom: 10px;">üîç Pesquisar Tema</button>
                <div id="searchPanel">
                    <input type="text" id="searchInput" placeholder="Ex: Praia, P√¥r do sol, Abstrato...">
                    <button id="btnDoSearch" class="btn" style="background:var(--accent-color); color:white;">Buscar</button>
                </div>
            </div>
            
            <hr style="border:0; border-top:1px solid var(--border-light); width: 100%; margin:0;">
            
            <div class="panel-section">
                <h3>Formas Geom√©tricas</h3>
                <div class="sidebar-shapes" id="shapesContainer">
                    <label class="shape-option"><input type="checkbox" value="circle" checked> C√≠rculos</label>
                    <label class="shape-option"><input type="checkbox" value="square" checked> Quadrados</label>
                    <label class="shape-option"><input type="checkbox" value="triangle"> Tri√¢ngulos</label>
                    <label class="shape-option"><input type="checkbox" value="line"> Linhas</label>
                </div>
            </div>

            <hr style="border:0; border-top:1px solid var(--border-light); width: 100%; margin:0;">

            <div class="panel-section">
                <h3>üî• Tend√™ncias</h3>
                <div id="trendingList"></div>
            </div>
        </aside>

        <main class="workspace">
            <div class="canvas-area" id="canvasContainer">
                <button id="btnExitFS" title="Sair da Tela Cheia">‚úï</button>

                <div class="status-overlay" id="statusOverlay">
                    <span class="loader" id="loader"></span>
                    <div class="status-text" id="statusText">Toque em uma op√ß√£o para come√ßar</div>
                </div>
                <canvas id="artCanvas"></canvas>
            </div>

            <div class="controls-bar">
                <div class="control-group">
                    <div class="control-label">Dura√ß√£o</div>
                    <select id="timeSelect">
                        <option value="15000">15s</option>
                        <option value="30000" selected>30s</option>
                        <option value="60000">1m</option>
                    </select>
                </div>

                <button id="btnDetailMode" class="btn btn-toggle active">
                    <span>‚ú® Auto Evolu√ß√£o</span>
                    <span>Ativado</span>
                </button>

                <div class="control-group">
                    <div class="control-label">Velocidade</div>
                    <input type="range" id="speedSlider" min="1" max="50" value="40">
                </div>

                <div class="control-group disabled" id="abstractionGroup" style="display:none;">
                    <div class="control-label">Escala</div>
                    <input type="range" id="abstractionSlider" min="1" max="100" value="50">
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button id="btnFullscreen" class="btn btn-action btn-fs">‚õ∂</button>
                    <button id="btnDownload" class="btn btn-action btn-dl">‚Üì</button>
                </div>
            </div>
        </main>
    </div>

    <script>
        const config = { width: 1920, height: 1080, shapes: ['circle', 'square'], abstraction: 50, paintSpeed: 40, duration: 30000, isRunning: false, startTime: 0, currentMode: 'none', currentTag: '', evolutionMode: true };
        const canvas = document.getElementById('artCanvas');
        const ctx = canvas.getContext('2d', { willReadFrequently: true });
        let sourceData = null, animationFrameId = null, originalImg = null;

        function init() { canvas.width = config.width; canvas.height = config.height; generateTrending(); updateDetailBtnUI(); }

        function generateTrending() {
            const themes = [ { name: "Natureza", tag: "nature,landscape" }, { name: "Urbano", tag: "city,architecture" }, { name: "Retrato", tag: "portrait,face" }, { name: "Abstrato", tag: "abstract,texture" } ];
            const container = document.getElementById('trendingList'); container.innerHTML = '';
            themes.forEach((item, i) => {
                const btn = document.createElement('button'); btn.className = 'btn btn-trend';
                btn.innerHTML = `<span>${item.name}</span> <span style="font-size:1.2rem;">‚Ä∫</span>`;
                btn.onclick = () => { config.currentMode = 'search'; config.currentTag = item.tag; searchImage(item.tag); if(window.innerWidth < 900) window.scrollTo({top:0, behavior:'smooth'}); };
                container.appendChild(btn);
            });
        }

        function searchImage(keyword) { config.currentMode = 'search'; config.currentTag = keyword; loadImage(`https://loremflickr.com/1920/1080/${encodeURIComponent(keyword)}`, 0); }

        function setLoading(isLoading, text) {
            const el = document.getElementById('statusOverlay');
            if(isLoading) { el.style.display = 'flex'; el.style.pointerEvents = 'all'; document.getElementById('statusText').innerText = text; document.getElementById('loader').style.display = 'block'; } 
            else { el.style.display = 'none'; el.style.pointerEvents = 'none'; }
        }

        function loadImage(baseUrl, attempt) {
            if (attempt === 0) setLoading(true, "Carregando imagem..."); config.isRunning = false; if(animationFrameId) cancelAnimationFrame(animationFrameId);
            const img = new Image(); img.crossOrigin = "Anonymous"; 
            img.onload = () => { originalImg = img; startArt(); setLoading(false); };
            img.onerror = () => { if (attempt < 3) setTimeout(() => loadImage(baseUrl, attempt + 1), 1500); else { setLoading(true, "Erro ao carregar. Tente novamente."); setTimeout(() => setLoading(false), 3000); } };
            img.src = baseUrl.startsWith('data:') ? baseUrl : `${baseUrl.split('?')[0]}?random=${Date.now()}`;
        }

        function startArt() {
            const offCanvas = document.createElement('canvas'); offCanvas.width = config.width; offCanvas.height = config.height;
            const offCtx = offCanvas.getContext('2d'); drawImageCover(offCtx, originalImg, config.width, config.height);
            try { sourceData = offCtx.getImageData(0, 0, config.width, config.height).data; } catch(e) { setLoading(true, "Erro de seguran√ßa (CORS)."); return; }
            // Fundo do canvas agora √© branco para combinar com o tema claro
            ctx.fillStyle = "#ffffff"; ctx.fillRect(0, 0, config.width, config.height);
            config.startTime = Date.now(); config.isRunning = true; loop();
        }

        function loop() {
            if(!config.isRunning) return;
            const elapsed = Date.now() - config.startTime; const duration = parseInt(config.duration);
            if(elapsed > duration) return; 
            
            const progress = Math.min(elapsed / duration, 1.0);
            let currentBaseSize = 40, loopsThisFrame = 1;

            if (config.evolutionMode) {
                const shrinkLimit = duration >= 120000 ? 0.4 : 0.6;
                let sizeProgress = progress / shrinkLimit; if (sizeProgress > 1) sizeProgress = 1;
                currentBaseSize = 40 * (3.5 * (1 - sizeProgress) + 0.1 * sizeProgress);
                loopsThisFrame = Math.floor((config.paintSpeed / 10) * Math.pow(150 / currentBaseSize, 1.5) * 0.5);
            } else {
                currentBaseSize = map(config.abstraction, 1, 100, 5, 80); loopsThisFrame = config.paintSpeed;
            }
            
            if (currentBaseSize < 2) currentBaseSize = 2; if (loopsThisFrame < 1) loopsThisFrame = 1; if (loopsThisFrame > 600) loopsThisFrame = 600;

            let shapesToUse = config.shapes.length > 0 ? config.shapes : ['circle'];
            for(let i=0; i < loopsThisFrame; i++) {
                const x = Math.floor(Math.random() * config.width), y = Math.floor(Math.random() * config.height);
                const idx = (y * config.width + x) * 4;
                // Ajuste para ignorar pixels muito claros (quase brancos) se o fundo for branco, 
                // para que o desenho n√£o "suma" no fundo.
                if(sourceData[idx] > 240 && sourceData[idx+1] > 240 && sourceData[idx+2] > 240) continue;
                
                const naturalJitter = 0.6 + (Math.random() * 0.8);
                // Invertendo a l√≥gica de tamanho baseada na luminosidade para fundo claro:
                // Cores mais escuras geram formas maiores.
                const brightness = (sourceData[idx] + sourceData[idx+1] + sourceData[idx+2]) / 765;
                const finalSize = currentBaseSize * (0.8 + (1 - brightness) * 0.5) * naturalJitter;
                
                ctx.fillStyle = ctx.strokeStyle = `rgb(${sourceData[idx]},${sourceData[idx+1]},${sourceData[idx+2]})`;
                drawShape(x, y, finalSize, shapesToUse[Math.floor(Math.random() * shapesToUse.length)]);
            }
            animationFrameId = requestAnimationFrame(loop);
        }

        function drawShape(x, y, size, s) {
            ctx.beginPath();
            if(s === 'circle') { ctx.arc(x, y, size/2, 0, Math.PI*2); ctx.fill(); }
            else if(s === 'square') { ctx.save(); ctx.translate(x, y); ctx.rotate(Math.random()*Math.PI*0.2); ctx.rect(-size/2, -size/2, size, size); ctx.fill(); ctx.restore(); }
            else if(s === 'triangle') { ctx.save(); ctx.translate(x, y); ctx.rotate(Math.random()*Math.PI*0.5); const h = size * 0.866; ctx.moveTo(0, -h/2); ctx.lineTo(-size/2, h/2); ctx.lineTo(size/2, h/2); ctx.fill(); ctx.restore(); }
            else if(s === 'line') { ctx.lineWidth = Math.max(1, size/4); const a = Math.random()*Math.PI*2; ctx.moveTo(x-Math.cos(a)*size, y-Math.sin(a)*size); ctx.lineTo(x+Math.cos(a)*size, y+Math.sin(a)*size); ctx.stroke(); }
        }

        function drawImageCover(ctx, img, w, h) {
            const r = Math.max(w / img.width, h / img.height);
            ctx.drawImage(img, (w - img.width * r) / 2, (h - img.height * r) / 2, img.width * r, img.height * r);
        }
        function map(v, a, b, c, d) { return c + ((v-a)/(b-a)) * (d-c); }

        document.getElementById('btnFullscreen').onclick = () => { const el = document.getElementById('canvasContainer'); if(el.requestFullscreen) el.requestFullscreen(); else if(el.webkitRequestFullscreen) el.webkitRequestFullscreen(); };
        document.getElementById('btnExitFS').onclick = () => { if(document.exitFullscreen) document.exitFullscreen(); else if(document.webkitExitFullscreen) document.webkitExitFullscreen(); };
        document.getElementById('btnDetailMode').onclick = () => { config.evolutionMode = !config.evolutionMode; updateDetailBtnUI(); };
        function updateDetailBtnUI() { 
            const b = document.getElementById('btnDetailMode'), g = document.getElementById('abstractionGroup');
            const spanStatus = b.querySelector('span:last-child');
            if(config.evolutionMode) { b.classList.add('active'); spanStatus.innerText = "Ativado"; g.style.display='none'; }
            else { b.classList.remove('active'); spanStatus.innerText = "Manual"; g.style.display='flex'; g.classList.remove('disabled'); }
        }
        document.getElementById('timeSelect').onchange = (e) => config.duration = parseInt(e.target.value);
        document.getElementById('speedSlider').oninput = (e) => { config.paintSpeed = parseInt(e.target.value); };
        document.getElementById('abstractionSlider').oninput = (e) => config.abstraction = parseInt(e.target.value);
        document.querySelectorAll('#shapesContainer input').forEach(cb => { cb.onchange = () => { config.shapes = Array.from(document.querySelectorAll('#shapesContainer input:checked')).map(c => c.value); } });
        document.getElementById('btnDownload').onclick = () => { const a = document.createElement('a'); a.download = 'geo_art_ios.png'; a.href = canvas.toDataURL(); a.click(); };
        document.getElementById('btnRandom').onclick = () => { config.currentMode = 'random'; loadImage(`https://picsum.photos/1920/1080`, 0); if(window.innerWidth < 900) window.scrollTo({top:0, behavior:'smooth'}); };
        document.getElementById('btnToggleSearch').onclick = () => { const p = document.getElementById('searchPanel'); p.style.display = p.style.display === 'block' ? 'none' : 'block'; };
        document.getElementById('btnDoSearch').onclick = () => { const val = document.getElementById('searchInput').value; if(val) { searchImage(val); if(window.innerWidth < 900) window.scrollTo({top:0, behavior:'smooth'}); }};
        document.getElementById('searchInput').onkeypress = (e) => { if(e.key === 'Enter') { const val = document.getElementById('searchInput').value; if(val) { searchImage(val); if(window.innerWidth < 900) window.scrollTo({top:0, behavior:'smooth'}); } } };
        document.getElementById('fileInput').onchange = (e) => { const f = e.target.files[0]; if(f) { config.currentMode = 'upload'; setLoading(true, "Lendo arquivo..."); const r = new FileReader(); r.onload = (evt) => { loadImage(evt.target.result, 0); if(window.innerWidth < 900) window.scrollTo({top:0, behavior:'smooth'}); }; r.readAsDataURL(f); } };

        init();
    </script>
</body>
</html>
